{"version":3,"file":"main.js","sources":["../assets/js/site/navigation.js"],"sourcesContent":["/**\n * File navigation.js.\n *\n * Handles toggling the navigation menu for small screens and enables TAB key\n * navigation support for dropdown menus.\n */\n( function() {\n\tconst siteNavigation = document.getElementById( 'site-navigation' );\n\n\t// Return early if the navigation doesn't exist.\n\tif ( ! siteNavigation ) {\n\t\treturn;\n\t}\n\n\tconst button = siteNavigation.getElementsByTagName( 'button' )[ 0 ];\n\n\t// Return early if the button doesn't exist.\n\tif ( 'undefined' === typeof button ) {\n\t\treturn;\n\t}\n\n\tconst menu = siteNavigation.getElementsByTagName( 'ul' )[ 0 ];\n\n\t// Hide menu toggle button if menu is empty and return early.\n\tif ( 'undefined' === typeof menu ) {\n\t\tbutton.style.display = 'none';\n\t\treturn;\n\t}\n\n\tif ( ! menu.classList.contains( 'nav-menu' ) ) {\n\t\tmenu.classList.add( 'nav-menu' );\n\t}\n\n\t// Toggle the .toggled class and the aria-expanded value each time the button is clicked.\n\tbutton.addEventListener( 'click', function() {\n\t\tsiteNavigation.classList.toggle( 'toggled' );\n\n\t\tif ( button.getAttribute( 'aria-expanded' ) === 'true' ) {\n\t\t\tbutton.setAttribute( 'aria-expanded', 'false' );\n\t\t} else {\n\t\t\tbutton.setAttribute( 'aria-expanded', 'true' );\n\t\t}\n\t} );\n\n\t// Remove the .toggled class and set aria-expanded to false when the user clicks outside the navigation.\n\tdocument.addEventListener( 'click', function( event ) {\n\t\tconst isClickInside = siteNavigation.contains( event.target );\n\n\t\tif ( ! isClickInside ) {\n\t\t\tsiteNavigation.classList.remove( 'toggled' );\n\t\t\tbutton.setAttribute( 'aria-expanded', 'false' );\n\t\t}\n\t} );\n\n\t// Get all the link elements within the menu.\n\tconst links = menu.getElementsByTagName( 'a' );\n\n\t// Get all the link elements with children within the menu.\n\tconst linksWithChildren = menu.querySelectorAll( '.menu-item-has-children > a, .page_item_has_children > a' );\n\n\t// Toggle focus each time a menu link is focused or blurred.\n\tfor ( const link of links ) {\n\t\tlink.addEventListener( 'focus', toggleFocus, true );\n\t\tlink.addEventListener( 'blur', toggleFocus, true );\n\t}\n\n\t// Toggle focus each time a menu link with children receive a touch event.\n\tfor ( const link of linksWithChildren ) {\n\t\tlink.addEventListener( 'touchstart', toggleFocus, false );\n\t}\n\n\t/**\n\t * Sets or removes .focus class on an element.\n\t */\n\tfunction toggleFocus() {\n\t\tif ( event.type === 'focus' || event.type === 'blur' ) {\n\t\t\tlet self = this;\n\t\t\t// Move up through the ancestors of the current link until we hit .nav-menu.\n\t\t\twhile ( ! self.classList.contains( 'nav-menu' ) ) {\n\t\t\t\t// On li elements toggle the class .focus.\n\t\t\t\tif ( 'li' === self.tagName.toLowerCase() ) {\n\t\t\t\t\tself.classList.toggle( 'focus' );\n\t\t\t\t}\n\t\t\t\tself = self.parentNode;\n\t\t\t}\n\t\t}\n\n\t\tif ( event.type === 'touchstart' ) {\n\t\t\tconst menuItem = this.parentNode;\n\t\t\tevent.preventDefault();\n\t\t\tfor ( const link of menuItem.parentNode.children ) {\n\t\t\t\tif ( menuItem !== link ) {\n\t\t\t\t\tlink.classList.remove( 'focus' );\n\t\t\t\t}\n\t\t\t}\n\t\t\tmenuItem.classList.toggle( 'focus' );\n\t\t}\n\t}\n}() );\n"],"names":["event"],"mappings":"CAME,WAAW;AACZ,QAAM,iBAAiB,SAAS,eAAgB,iBAAiB;AAGjE,MAAK,CAAE,gBAAiB;AACvB;AAAA,EACA;AAED,QAAM,SAAS,eAAe,qBAAsB,QAAU,EAAE,CAAC;AAGjE,MAAK,gBAAgB,OAAO,QAAS;AACpC;AAAA,EACA;AAED,QAAM,OAAO,eAAe,qBAAsB,IAAM,EAAE,CAAC;AAG3D,MAAK,gBAAgB,OAAO,MAAO;AAClC,WAAO,MAAM,UAAU;AACvB;AAAA,EACA;AAED,MAAK,CAAE,KAAK,UAAU,SAAU,UAAU,GAAK;AAC9C,SAAK,UAAU,IAAK;EACpB;AAGD,SAAO,iBAAkB,SAAS,WAAW;AAC5C,mBAAe,UAAU,OAAQ;AAEjC,QAAK,OAAO,aAAc,eAAe,MAAO,QAAS;AACxD,aAAO,aAAc,iBAAiB;IACzC,OAAS;AACN,aAAO,aAAc,iBAAiB;IACtC;AAAA,EACH;AAGC,WAAS,iBAAkB,SAAS,SAAUA,QAAQ;AACrD,UAAM,gBAAgB,eAAe,SAAUA,OAAM,MAAM;AAE3D,QAAK,CAAE,eAAgB;AACtB,qBAAe,UAAU,OAAQ;AACjC,aAAO,aAAc,iBAAiB;IACtC;AAAA,EACH;AAGC,QAAM,QAAQ,KAAK,qBAAsB,GAAG;AAG5C,QAAM,oBAAoB,KAAK,iBAAkB,0DAA0D;AAG3G,aAAY,QAAQ,OAAQ;AAC3B,SAAK,iBAAkB,SAAS,aAAa,IAAI;AACjD,SAAK,iBAAkB,QAAQ,aAAa,IAAI;AAAA,EAChD;AAGD,aAAY,QAAQ,mBAAoB;AACvC,SAAK,iBAAkB,cAAc,aAAa,KAAK;AAAA,EACvD;AAKD,WAAS,cAAc;AACtB,QAAK,MAAM,SAAS,WAAW,MAAM,SAAS,QAAS;AACtD,UAAI,OAAO;AAEX,aAAQ,CAAE,KAAK,UAAU,SAAU,UAAU,GAAK;AAEjD,YAAK,SAAS,KAAK,QAAQ,YAAW,GAAK;AAC1C,eAAK,UAAU,OAAQ;QACvB;AACD,eAAO,KAAK;AAAA,MACZ;AAAA,IACD;AAED,QAAK,MAAM,SAAS,cAAe;AAClC,YAAM,WAAW,KAAK;AACtB,YAAM,eAAc;AACpB,iBAAY,QAAQ,SAAS,WAAW,UAAW;AAClD,YAAK,aAAa,MAAO;AACxB,eAAK,UAAU,OAAQ;QACvB;AAAA,MACD;AACD,eAAS,UAAU,OAAQ;IAC3B;AAAA,EACD;AACF,GAAG;"}